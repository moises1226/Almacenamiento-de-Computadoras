CREATE DATABASE GuardadoDeBarras;
USE GuardadoDeBarras;

CREATE TABLE usuario (
    IdUsuario INT AUTO_INCREMENT NOT NULL,
    Nombre VARCHAR(50) NOT NULL,
    DNI CHAR(8) ,
    Curso VARCHAR(10) NOT NULL,
    PRIMARY KEY (IdUsuario)
);

CREATE TABLE computadora (
    IdCompu INT AUTO_INCREMENT NOT NULL,
    NroCompu SMALLINT UNIQUE NOT NULL,
    CodigoBarras VARCHAR(16) UNIQUE NOT NULL,
    PRIMARY KEY (IdCompu)
);

CREATE TABLE carrito (
    IdCarrito INT AUTO_INCREMENT NOT NULL,
    NroCarrito INT NOT NULL,
    IdCompu INT NOT NULL,
    PRIMARY KEY (IdCarrito),
    FOREIGN KEY (IdCompu) REFERENCES computadora(IdCompu)
);

CREATE TABLE retiro (
    IdRetiro INT AUTO_INCREMENT NOT NULL,
    IdUser INT NOT NULL,
    IdCarrito INT NOT NULL,
    FechaRetiro DATETIME NOT NULL,
    FechaEntrega DATETIME ,
    Descripcion VARCHAR(100),
    PRIMARY KEY (IdRetiro),
    FOREIGN KEY (IdUser) REFERENCES usuario(IdUsuario),
    FOREIGN KEY (IdCarrito) REFERENCES carrito(IdCarrito)
);

-- Ingresando datos en la tabla computadora
INSERT INTO computadora (NroCompu, CodigoBarras) VALUES
('2102', 'PSBA210102014531'),  -- IdCompu 1
('2101', 'PSBA210102014508'),  -- IdCompu 2
('2104', 'PSBA210102014721'),  -- IdCompu 3
('2105', 'PSBA21012013664'),    -- IdCompu 4
('2106', 'PSBA210102014722'),  -- IdCompu 5
('2107', 'PSBA210102014410'),  -- IdCompu 6
('2108', 'PSBA210102014728'),  -- IdCompu 7
('2109', 'PSBA210102021652'),  -- IdCompu 8
('2111', 'PSBA210102021246'),  -- IdCompu 9
('2112', 'PSBA210102014648'),  -- IdCompu 10
('2113', 'PSBA210102016325'),  -- IdCompu 11
('2115', 'PSBA210102021653'),  -- IdCompu 12
('2116', 'PSBA210102022145'),  -- IdCompu 13
('2117', 'PSBA210102010709'),  -- IdCompu 14
('2118', 'PSBA210102013881'),  -- IdCompu 15
('2119', 'PSBA210102014301'),  -- IdCompu 16
('2120', 'PSBA210102011855'),  -- IdCompu 17
('2121', 'PSBA210102014982'),  -- IdCompu 18
('2122', 'PSBA210102013946'),  -- IdCompu 19
('2123', 'PSBA210102013611'),  -- IdCompu 20
('2124', 'PSBA210102013163'),  -- IdCompu 21
('2125', 'PSBA210102013164'),  -- IdCompu 22
('2126', 'PSBA210102014123'),  -- IdCompu 23
('2127', 'PSBA210102013673'),  -- IdCompu 24
('2128', 'PSBA210102010716'),  -- IdCompu 25
('2129', 'PSBA210102021170'),  -- IdCompu 26
('2130', 'PSBA210102021477'),  -- IdCompu 27
('2131', 'PSBA210102022108');  -- IdCompu 28

-- Ingresando datos en la tabla carrito
INSERT INTO carrito (NroCarrito, IdCompu) VALUES
(2100, 1),  -- PSBA210102014531
(2100, 2),  -- PSBA210102014508
(2100, 3),  -- PSBA210102014721
(2100, 4),  -- PSBA21012013664
(2100, 5),  -- PSBA210102014722
(2100, 6),  -- PSBA210102014410
(2100, 7),  -- PSBA210102014728
(2100, 8),  -- PSBA210102021652
(2100, 9),  -- PSBA210102021246
(2100, 10), -- PSBA210102014648
(2100, 11), -- PSBA210102016325
(2100, 12), -- PSBA210102021653
(2100, 13), -- PSBA210102022145
(2100, 14), -- PSBA210102010709
(2100, 15), -- PSBA210102013881
(2100, 16), -- PSBA210102014301
(2100, 17), -- PSBA210102011855
(2100, 18), -- PSBA210102014982
(2100, 19), -- PSBA210102013946
(2100, 20), -- PSBA210102013611
(2100, 21), -- PSBA210102013163
(2100, 22), -- PSBA210102013164
(2100, 23), -- PSBA210102014123
(2100, 24), -- PSBA210102013673
(2100, 25), -- PSBA210102010716
(2100, 26), -- PSBA210102021170
(2100, 27), -- PSBA210102021477
(2100, 28); -- PSBA210102022108
